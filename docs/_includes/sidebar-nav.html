<div class="flex-shrink-0 bg-white sticky-top z-sidebar">
  <ul class="list-unstyled ps-0">
    <li class="mb-1">
    {% for item in site.data.main-nav.toc %}
      <button class="nav-button btn btn-toggle align-items-center rounded collapsed text-start ps-0" data-bs-toggle="collapse" data-bs-target="#{{ item.collapse-id }}-collapse" aria-expanded="true">
        <span>
          {{ item.title }}
        </span>
      </button>
        <div class="collapse {% for entry in item.items %}{% if page.url contains entry.url %} show {% endif %}{% endfor %}" id="{{ item.collapse-id }}-collapse">
        <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
          {% for entry in item.items %}
            {% assign currentEntry = entry.url | append: '/' %}
            <li class="doc-link ps-3 pb-1 text-start {% if currentEntry == page.url %} list-active {% endif %}">
              {% if entry.url %}
                <a href="{{ entry.url }}">
                  {{ entry.title }}
                </a>
              {% endif %}
              {% if entry.subfolderitems.size > 0 %}
                {% if entry.collapse-id %}
                <button class="border-0 align-items-center text-start ps-0 bg-white" data-bs-toggle="collapse" data-bs-target="#{{ entry.collapse-id }}-collapse" aria-expanded="true">
                  <span>
                    {{ entry.title }}
                  </span>
                </button>
                {% endif %}

              {% assign show = entry.subfolderitems | find_exp: 'sub_entry', 'page.url contains sub_entry.url' %}
              <div class="collapse {% if show %} show {% endif %}" {% if entry.collapse-id %} id="{{ entry.collapse-id }}-collapse" {% endif %}>
                <ul class="list-unstyled">
                  {% for subentry in entry.subfolderitems %}
                    {% assign currentSubEntry = subentry.url | append: '/' %}
                    <li class="doc-link ps-3 pt-1 text-start {% if currentSubEntry == page.url %} list-active {% endif %}">
                      <a href="{{ subentry.url }}">
                        {{ subentry.title }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
      {% endfor %}
    </li>
  </ul>
</div>
